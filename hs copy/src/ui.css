/* Theme tokens */
:root {
  --bg: #0b0d10;
  --fg: #e6e6e6;
  --muted: #a8b0ba;
  --card-bg: #14181e;
  --frame: #262c36;
  --glow: #ff6a00;
  --glow-soft: rgba(255,106,0,0.35);
  --hp: #80d94d;
  --atk: #ff7b3a;
  --shield: #ffd451;
  --taunt: #6a3fd9;
  --danger: #e53935;
  --info: #64b5f6;
}

/* Utilities */
.u-row { display: flex; gap: 8px; align-items: center; }
.u-col { display: flex; flex-direction: column; gap: 6px; }
.u-center { display: grid; place-items: center; }
.u-glow { box-shadow: 0 0 16px var(--glow-soft), inset 0 0 0 1px var(--glow); }
.u-pulse { animation: pulse 1.4s ease-in-out infinite; }
.u-shake { animation: shake 0.18s linear 1; }
.u-breathe { animation: breathe 2.2s ease-in-out infinite; }
.u-aim-target { outline: 2px solid var(--glow); outline-offset: 2px; }
.u-aim-invalid { filter: saturate(0.4) brightness(0.7); opacity: 0.6; }

@keyframes pulse { 0%,100%{ transform: scale(1);} 50%{ transform: scale(1.05);} }
@keyframes breathe { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-1px);} }
@keyframes shake { 0%{ transform: translate(0) } 25%{ transform: translate(2px, 0)} 50%{ transform: translate(-2px, 0)} 75%{ transform: translate(1px, 0)} 100%{ transform: translate(0) } }

/* Battlefield v2 layout */
#battlefield-v2 { position: relative; }
#aim-overlay { position: absolute; inset: 0; pointer-events: none; }
#aim-overlay path { stroke: var(--glow); stroke-width: 3; fill: none; filter: drop-shadow(0 0 6px var(--glow-soft)); }
#aim-overlay .arrow { fill: var(--glow); filter: drop-shadow(0 0 6px var(--glow-soft)); }
/* FX canvas */
#fx-layer { z-index: 2; }

/* Card visuals */
.card-wrap { position: relative; display: inline-block; overflow: visible; }
.card-minion { width: 168px; background: var(--card-bg); color: var(--fg); border-radius: 12px; border: 1px solid var(--frame); overflow: hidden; position: relative; transition: transform .12s ease, box-shadow .12s ease; }
.card-minion.ready { box-shadow: 0 0 14px var(--glow-soft); }
.card-minion:hover { transform: translateY(-2px); }
.cm-portrait { height: 128px; background: linear-gradient(180deg, #1b222c, #12171d); position: relative; overflow: hidden; }
.cm-portrait::after { content: ""; position: absolute; inset: 0; background: radial-gradient(120% 80% at 50% 30%, rgba(255,255,255,0.06), rgba(0,0,0,0) 60%), radial-gradient(90% 60% at 50% 80%, rgba(255,106,0,0.12), rgba(0,0,0,0) 50%); mix-blend-mode: screen; }
.cm-name { position: absolute; top: 6px; left: 8px; right: 8px; font-size: 12px; letter-spacing: .3px; color: #f0f3f7; text-shadow: 0 1px 0 #000; background: rgba(20,24,30,.45); padding: 2px 6px; border-radius: 8px; border: 1px solid rgba(255,255,255,.08); }
.cm-keywords { display: flex; gap: 4px; position: absolute; bottom: 6px; left: 8px; }
.cm-chip { font-size: 10px; padding: 1px 5px; border-radius: 999px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.14); color: var(--muted); }
.cm-orb { position: absolute; bottom: -14px; width: 30px; height: 30px; border-radius: 999px; display: grid; place-items: center; font-weight: 800; font-size: 13px; box-shadow: 0 2px 0 rgba(0,0,0,.6), 0 0 8px rgba(0,0,0,.5); border: 2px solid rgba(0,0,0,.45); z-index: 3; pointer-events: none; }
.cm-orb.atk { left: -14px; background: radial-gradient(circle at 35% 35%, #ffb08a, var(--atk)); color: #2b1207; }
.cm-orb.hp { right: -14px; background: radial-gradient(circle at 35% 35%, #b9f29a, var(--hp)); color: #092309; }
.cm-tags { position: absolute; top: 6px; right: 8px; font-size: 10px; color: var(--muted); opacity: .9; }

/* Center text panel */
.cm-text { position: absolute; left: 10px; right: 10px; bottom: 36px; padding: 6px 8px; background: rgba(10,12,16,0.58); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; font-size: 11px; line-height: 1.2; color: #e9eef6; max-height: 44px; overflow: hidden; text-overflow: ellipsis; }

/* Buttons */
.btn { background: #2a2f37; color: var(--fg); border: 1px solid #49515e; padding: 8px 12px; border-radius: 999px; cursor: pointer; transition: transform .08s ease, box-shadow .12s ease; box-shadow: 0 1px 0 rgba(0,0,0,.7), 0 0 0 0 rgba(255,106,0,0); }
.btn:hover { transform: translateY(-1px); box-shadow: 0 1px 0 rgba(0,0,0,.7), 0 0 14px 0 var(--glow-soft); }
.btn:active { transform: translateY(0); }
.btn--end { background: linear-gradient(180deg, #2f363f, #262c36); border-color: #586170; }
.btn--power { background: radial-gradient(circle at 50% 40%, rgba(255,106,0,.18), rgba(0,0,0,0) 60%), #262c36; border-color: #6a3fd9; }
.btn-ring { position: relative; }
.btn-ring::after { content: ""; position: absolute; inset: -2px; border-radius: 999px; border: 1px solid var(--glow); opacity: .3; filter: blur(2px); }

/* Impact flash */
.u-flash { box-shadow: 0 0 0 9999px rgba(255,255,255,0.0) inset; animation: flash 0.16s ease; }
@keyframes flash { 0%{ box-shadow: 0 0 0 9999px rgba(255,255,255,0.12) inset; } 100%{ box-shadow: 0 0 0 9999px rgba(255,255,255,0) inset; } }

/* Wind-up subtle squash */
.u-windup { animation: windup 0.14s ease; }
@keyframes windup { 0%{ transform: scale(1) } 100%{ transform: scaleY(0.92) scaleX(1.06) translateY(1px) } }

/* Lanes and plates */
.zone { border: 1px solid #1f242c; border-radius: 10px; background: linear-gradient(180deg, rgba(26,32,40,.8), rgba(16,20,26,.8)); padding: 10px; }
.board-lane { min-height: 140px; display: flex; gap: 10px; align-items: center; }
.control-lane { display: grid; grid-template-columns: 180px 1fr 180px; align-items: center; gap: 10px; }
.hand-tray { min-height: 160px; display: flex; gap: 10px; align-items: center; background: linear-gradient(180deg, rgba(18,22,28,.8), rgba(10,12,16,.9)); border: 1px solid #1f242c; border-radius: 10px; padding: 12px; }

.hero-plate { position: relative; width: 160px; height: 80px; border-radius: 12px; background: radial-gradient(circle at 30% 30%, rgba(255,106,0,.14), rgba(0,0,0,0) 60%), #1c222a; border: 1px solid #39404b; display: grid; place-items: center; color: var(--fg); }
.hero-plate.enemy { cursor: pointer; }
.badge { position: absolute; bottom: -12px; width: 28px; height: 28px; border-radius: 999px; display: grid; place-items: center; font-weight: 700; font-size: 12px; box-shadow: 0 2px 0 rgba(0,0,0,.6); border: 2px solid rgba(0,0,0,.45); }
.badge.heart { left: -12px; background: radial-gradient(circle at 35% 35%, #ff9aa0, var(--danger)); color: #2b090a; }
.badge.mana { right: -12px; background: radial-gradient(circle at 35% 35%, #b0c8ff, #6e84ff); color: #0b1430; }

.log-panel { font-size: 12px; max-height: 120px; overflow: auto; opacity: .9; }

/* Shine sweep utility */
.u-sweep { position: relative; overflow: hidden; }
.u-sweep::before { content: ""; position: absolute; inset: -60% -140%; background: linear-gradient(75deg, rgba(255,255,255,0), rgba(255,255,255,0.22), rgba(255,255,255,0)); transform: translateX(-100%); animation: sweep .6s ease forwards; }
@keyframes sweep { to { transform: translateX(100%); } }

/* Quest bubble */
.quest-panel { padding: 10px 12px; background: linear-gradient(180deg, #ffe566, #e8c641); color: #2a2200; border-radius: 12px; border: 1px solid #d2b43a; box-shadow: 0 2px 0 rgba(0,0,0,.25); font-size: 13px; max-width: 260px; }
.quest-panel .title { font-weight: 700; margin-bottom: 4px; }
