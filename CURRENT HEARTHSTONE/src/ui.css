/* Theme tokens */
:root {
  --bg: #0b0d10;
  --fg: #e6e6e6;
  --muted: #a8b0ba;
  --card-bg: #14181e;
  --frame: #262c36;
  --glow: #ff6a00;
  --glow-soft: rgba(255,106,0,0.35);
  --hp: #80d94d;
  --atk: #ff7b3a;
  --shield: #ffd451;
  --taunt: #6a3fd9;
  --danger: #e53935;
  --info: #64b5f6;
}

/* Utilities */
.u-row { display: flex; gap: 8px; align-items: center; }
.u-col { display: flex; flex-direction: column; gap: 6px; }
.u-center { display: grid; place-items: center; }
.u-glow { box-shadow: 0 0 16px var(--glow-soft), inset 0 0 0 1px var(--glow); }
.u-pulse { animation: pulse 1.4s ease-in-out infinite; }
.u-shake { animation: shake 0.18s linear 1; }
.u-breathe { animation: breathe 2.2s ease-in-out infinite; }
.u-aim-target { outline: 2px solid var(--glow); outline-offset: 2px; }
.u-aim-invalid { filter: saturate(0.4) brightness(0.7); opacity: 0.6; }

@keyframes pulse { 0%,100%{ transform: scale(1);} 50%{ transform: scale(1.05);} }
@keyframes breathe { 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-1px);} }
@keyframes shake { 0%{ transform: translate(0) } 25%{ transform: translate(2px, 0)} 50%{ transform: translate(-2px, 0)} 75%{ transform: translate(1px, 0)} 100%{ transform: translate(0) } }

/* Battlefield v2 layout */
#battlefield-v2 { position: relative; }
#aim-overlay { position: absolute; inset: 0; pointer-events: none; }
#aim-overlay path { stroke: var(--glow); stroke-width: 3; fill: none; filter: drop-shadow(0 0 6px var(--glow-soft)); }
#aim-overlay .arrow { fill: var(--glow); filter: drop-shadow(0 0 6px var(--glow-soft)); }
/* FX canvas */
#fx-layer { z-index: 2; }

/* Card visuals */
.card-wrap { position: relative; display: inline-block; overflow: visible; }
.card-minion { width: 168px; background: var(--card-bg); color: var(--fg); border-radius: 12px; border: 1px solid var(--frame); overflow: hidden; position: relative; transition: transform .12s ease, box-shadow .12s ease; }
.card-minion.ready { box-shadow: 0 0 14px var(--glow-soft); }
.card-minion:hover { transform: translateY(-2px); }
.cm-portrait { height: 128px; background: linear-gradient(180deg, #1b222c, #12171d); position: relative; overflow: hidden; }
.cm-portrait::after { content: ""; position: absolute; inset: 0; background: radial-gradient(120% 80% at 50% 30%, rgba(255,255,255,0.06), rgba(0,0,0,0) 60%), radial-gradient(90% 60% at 50% 80%, rgba(255,106,0,0.12), rgba(0,0,0,0) 50%); mix-blend-mode: screen; }
.cm-name { position: absolute; top: 6px; left: 8px; right: 8px; font-size: 12px; letter-spacing: .3px; color: #f0f3f7; text-shadow: 0 1px 0 #000; background: rgba(20,24,30,.45); padding: 2px 6px; border-radius: 8px; border: 1px solid rgba(255,255,255,.08); }
.cm-keywords { display: flex; gap: 4px; position: absolute; bottom: 6px; left: 8px; }
.cm-chip { font-size: 10px; padding: 1px 5px; border-radius: 999px; background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.14); color: var(--muted); }
.cm-orb { position: absolute; bottom: -14px; width: 30px; height: 30px; border-radius: 999px; display: grid; place-items: center; font-weight: 800; font-size: 13px; box-shadow: 0 2px 0 rgba(0,0,0,.6), 0 0 8px rgba(0,0,0,.5); border: 2px solid rgba(0,0,0,.45); z-index: 3; pointer-events: none; }
.cm-orb.atk { left: -6px; background: radial-gradient(circle at 35% 35%, #ffb08a, var(--atk)); color: #2b1207; }
.cm-orb.hp { right: -6px; background: radial-gradient(circle at 35% 35%, #b9f29a, var(--hp)); color: #092309; }
.cm-orb.cost { top: -8px; right: -8px; bottom: auto; background: radial-gradient(circle at 35% 35%, #9db8ff, #5080ff); color: #0a1430; }

/* Center text panel */
.cm-text { position: absolute; left: 10px; right: 10px; bottom: 36px; padding: 6px 8px; background: rgba(10,12,16,0.58); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; font-size: 11px; line-height: 1.2; color: #e9eef6; max-height: 44px; overflow: hidden; text-overflow: ellipsis; }

/* Buttons */
.btn { background: #2a2f37; color: var(--fg); border: 1px solid #49515e; padding: 8px 12px; border-radius: 999px; cursor: pointer; transition: transform .08s ease, box-shadow .12s ease; box-shadow: 0 1px 0 rgba(0,0,0,.7), 0 0 0 0 rgba(255,106,0,0); }
.btn:hover { transform: translateY(-1px); box-shadow: 0 1px 0 rgba(0,0,0,.7), 0 0 14px 0 var(--glow-soft); }
.btn:active { transform: translateY(0); }
.btn--end { background: linear-gradient(180deg, #2f363f, #262c36); border-color: #586170; }
.btn--power { background: radial-gradient(circle at 50% 40%, rgba(255,106,0,.18), rgba(0,0,0,0) 60%), #262c36; border-color: #6a3fd9; }
.btn-ring { position: relative; }
.btn-ring::after { content: ""; position: absolute; inset: -2px; border-radius: 999px; border: 1px solid var(--glow); opacity: .3; filter: blur(2px); }

/* Impact flash */
.u-flash { box-shadow: 0 0 0 9999px rgba(255,255,255,0.0) inset; animation: flash 0.16s ease; }
@keyframes flash { 0%{ box-shadow: 0 0 0 9999px rgba(255,255,255,0.12) inset; } 100%{ box-shadow: 0 0 0 9999px rgba(255,255,255,0) inset; } }

/* Wind-up subtle squash */
.u-windup { animation: windup 0.14s ease; }
@keyframes windup { 0%{ transform: scale(1) } 100%{ transform: scaleY(0.92) scaleX(1.06) translateY(1px) } }

/* Zones and lanes */
.zone { border: 1px solid #1f242c; border-radius: 10px; background: linear-gradient(180deg, rgba(26,32,40,.8), rgba(16,20,26,.8)); padding: 10px; }
.enemy-zone { display: flex; gap: 12px; align-items: center; min-height: 140px; }
.player-zone { display: flex; gap: 12px; align-items: center; min-height: 140px; }
.creature-lane { display: flex; gap: 10px; align-items: center; flex: 1; }
.hand-tray { min-height: 160px; display: flex; gap: 10px; align-items: center; background: linear-gradient(180deg, rgba(18,22,28,.8), rgba(10,12,16,.9)); border: 1px solid #1f242c; border-radius: 10px; padding: 12px; }

/* Hero avatar (new Hearthstone-style) */
.hero-avatar { position: relative; width: 220px; min-height: 120px; border-radius: 16px; background: radial-gradient(circle at 30% 30%, rgba(255,106,0,.14), rgba(0,0,0,0) 60%), #1c222a; border: 2px solid #39404b; padding: 12px; display: flex; flex-direction: column; gap: 6px; color: var(--fg); transition: transform .12s ease, box-shadow .12s ease; }
.hero-avatar.enemy { cursor: pointer; }
.hero-avatar.enemy:hover { transform: translateY(-2px); }
.hero-portrait { font-size: 16px; font-weight: 600; text-align: center; padding: 8px; background: rgba(10,12,16,0.4); border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); flex: 1; display: grid; place-items: center; }

/* Hand counter */
.hand-counter { display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 10px; background: rgba(20,24,30,.8); border: 1px solid #39404b; border-radius: 10px; min-width: 60px; }
.hand-counter-icon { font-size: 24px; opacity: 0.8; }
.hand-counter-count { font-size: 18px; font-weight: 700; color: var(--info); }

/* End turn zone */
.end-turn-zone { display: grid; place-items: center; padding: 0 12px; }

/* Badge styles */
.badge { position: absolute; bottom: -12px; width: 28px; height: 28px; border-radius: 999px; display: grid; place-items: center; font-weight: 700; font-size: 12px; box-shadow: 0 2px 0 rgba(0,0,0,.6); border: 2px solid rgba(0,0,0,.45); }
.badge.heart { left: -12px; background: radial-gradient(circle at 35% 35%, #ff9aa0, var(--danger)); color: #2b090a; }
.badge.mana { right: -12px; background: radial-gradient(circle at 35% 35%, #b0c8ff, #6e84ff); color: #0b1430; }

/* Shine sweep utility */
.u-sweep { position: relative; overflow: hidden; }
.u-sweep::before { content: ""; position: absolute; inset: -60% -140%; background: linear-gradient(75deg, rgba(255,255,255,0), rgba(255,255,255,0.22), rgba(255,255,255,0)); transform: translateX(-100%); animation: sweep .6s ease forwards; }
@keyframes sweep { to { transform: translateX(100%); } }

/* Quest bubble */
.quest-panel { padding: 10px 12px; background: linear-gradient(180deg, #ffe566, #e8c641); color: #2a2200; border-radius: 12px; border: 1px solid #d2b43a; box-shadow: 0 2px 0 rgba(0,0,0,.25); font-size: 13px; max-width: 260px; }
.quest-panel .title { font-weight: 700; margin-bottom: 4px; }

/* Gallery view */
.view-toggle-btn { position: fixed; top: 16px; right: 16px; z-index: 100; background: #2a2f37; color: #e6e6e6; border: 1px solid #555; padding: 10px 16px; cursor: pointer; border-radius: 8px; font-size: 18px; transition: transform .12s ease, box-shadow .12s ease; }
.view-toggle-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,.4); }

#gallery-view { overflow-y: auto; height: 100vh; padding: 60px 20px 20px; background: var(--bg); }
.gallery-section { margin-bottom: 40px; }
.card-gallery-grid { display: flex; flex-wrap: wrap; gap: 12px; align-content: flex-start; }

/* Deck Builder */
.deck-builder-wrapper { display: grid; grid-template-columns: 2fr 1fr; gap: 24px; padding: 20px; background: var(--bg); color: var(--fg); min-height: 100vh; }
.deck-builder-gallery { overflow-y: auto; max-height: 100vh; padding-right: 12px; }
.deck-builder-decklist { position: sticky; top: 20px; max-height: calc(100vh - 80px); display: flex; flex-direction: column; background: var(--card-bg); border: 1px solid var(--frame); border-radius: 12px; padding: 20px; }

/* Gallery disabled cards */
.card-disabled { opacity: 0.5; filter: saturate(0.4); cursor: not-allowed !important; }
.card-disabled:hover { transform: none !important; }

/* Gallery count badge */
.gallery-count-badge { position: absolute; top: 8px; right: 8px; background: rgba(255,106,0,0.9); color: #fff; font-size: 14px; font-weight: 700; padding: 4px 8px; border-radius: 999px; box-shadow: 0 2px 4px rgba(0,0,0,.6); }

/* Gallery cost headers */
.gallery-cost-header { width: 100%; font-size: 18px; font-weight: 700; color: var(--glow); margin: 16px 0 8px; padding: 8px 12px; background: rgba(255,106,0,0.1); border-left: 3px solid var(--glow); border-radius: 4px; }

/* Deck list */
.deck-list-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; padding-bottom: 12px; border-bottom: 2px solid var(--frame); }
.deck-list-header h2 { margin: 0; font-size: 20px; }
.deck-list-counter { font-size: 16px; font-weight: 700; color: var(--muted); }
.deck-list-counter.complete { color: var(--hp); }

.deck-list-container { flex: 1; overflow-y: auto; margin-bottom: 16px; }
.deck-list-empty { text-align: center; color: var(--muted); padding: 40px 20px; font-size: 14px; line-height: 1.6; }

.deck-list-cost-header { font-size: 14px; font-weight: 700; color: var(--glow); margin: 12px 0 6px; text-transform: uppercase; letter-spacing: 0.5px; }

.deck-list-entry { display: grid; grid-template-columns: 30px 1fr auto; gap: 8px; align-items: center; padding: 8px 12px; margin: 2px 0; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 6px; transition: background .12s ease, transform .08s ease; }
.deck-list-entry:hover { background: rgba(255,106,0,0.15); transform: translateX(-2px); border-color: rgba(255,106,0,0.4); }

.deck-list-cost { font-weight: 700; color: var(--info); font-size: 16px; text-align: center; }
.deck-list-name { font-size: 14px; color: var(--fg); }
.deck-list-count { font-size: 12px; color: var(--muted); font-weight: 700; min-width: 30px; text-align: right; }

/* Start button */
.btn--start-run { width: 100%; padding: 14px 20px; font-size: 16px; font-weight: 700; background: linear-gradient(180deg, var(--hp), #5fb22d); border-color: var(--hp); margin-top: auto; }
.btn--start-run:hover { box-shadow: 0 4px 16px rgba(128,217,77,0.4); }
.btn--start-run.disabled { background: #2a2f37; border-color: #49515e; opacity: 0.5; cursor: not-allowed; }
.btn--start-run.disabled:hover { transform: none; box-shadow: none; }

/* Shop */
.shop-container { padding: 32px; background: var(--bg); color: var(--fg); min-height: 100vh; max-width: 1400px; margin: 0 auto; }

.shop-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px; padding-bottom: 16px; border-bottom: 2px solid var(--frame); }
.shop-header h1 { margin: 0; font-size: 32px; color: var(--glow); }

.shop-stats { display: flex; gap: 32px; }
.shop-stat { display: flex; flex-direction: column; gap: 4px; }
.shop-stat-label { font-size: 12px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }
.shop-stat-value { font-size: 24px; font-weight: 700; color: var(--fg); }
.shop-stat-value.gold { color: #ffd451; }

.shop-cards-section { margin-bottom: 32px; }
.shop-cards-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(168px, 1fr)); gap: 16px; }

.shop-price-badge { position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%); background: linear-gradient(180deg, #ffd451, #e8c641); color: #2a2200; font-size: 11px; font-weight: 700; padding: 4px 10px; border-radius: 999px; box-shadow: 0 2px 4px rgba(0,0,0,.6); border: 1px solid #d2b43a; z-index: 5; }

.shop-actions { display: flex; gap: 16px; justify-content: center; padding: 24px 0; }
.btn--remove { background: linear-gradient(180deg, #e53935, #c62828); border-color: #e53935; }
.btn--remove:hover { box-shadow: 0 4px 16px rgba(229,57,53,0.4); }
.btn--remove.disabled { background: #2a2f37; border-color: #49515e; opacity: 0.5; cursor: not-allowed; }
.btn--remove.disabled:hover { transform: none; box-shadow: none; }

.btn--next-fight { background: linear-gradient(180deg, var(--hp), #5fb22d); border-color: var(--hp); padding: 12px 32px; font-size: 18px; font-weight: 700; }
.btn--next-fight:hover { box-shadow: 0 4px 16px rgba(128,217,77,0.4); }

/* Remove Card Screen */
.remove-card-container { padding: 32px; background: var(--bg); color: var(--fg); min-height: 100vh; max-width: 1200px; margin: 0 auto; }
.remove-card-header { margin-bottom: 32px; }
.remove-card-header h1 { margin: 0; font-size: 32px; color: var(--glow); }

.remove-card-deck { background: var(--frame); border-radius: 8px; padding: 24px; margin-bottom: 24px; }
.remove-card-cost-header { font-size: 18px; font-weight: 700; color: var(--glow); margin: 16px 0 8px; padding: 8px 12px; background: rgba(255,106,0,0.1); border-left: 3px solid var(--glow); border-radius: 4px; }
.remove-card-cost-header:first-child { margin-top: 0; }

/* Grid layout for cards (like deck builder) */
.remove-card-deck { display: flex; flex-direction: column; gap: 12px; }
.remove-card-deck .card-gallery-grid { display: flex; flex-wrap: wrap; gap: 12px; align-content: flex-start; }
.remove-card-empty { text-align: center; padding: 32px; color: var(--muted); font-size: 16px; }

.btn--back-to-shop { background: linear-gradient(180deg, #49515e, #3a4047); border-color: #49515e; padding: 10px 24px; }
.btn--back-to-shop:hover { box-shadow: 0 4px 12px rgba(73,81,94,0.4); }

/* Modal */
.modal-backdrop { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.75); display: flex; align-items: center; justify-content: center; z-index: 1000; animation: fadeIn 0.2s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.modal-container { background: var(--frame); border: 2px solid var(--glow); border-radius: 8px; padding: 32px; min-width: 400px; box-shadow: 0 8px 32px rgba(0,0,0,0.6); animation: slideUp 0.2s ease; }
@keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

.modal-buttons { display: flex; gap: 12px; justify-content: center; }
.btn--modal-cancel { background: linear-gradient(180deg, #49515e, #3a4047); border-color: #49515e; padding: 10px 24px; }
.btn--modal-cancel:hover { box-shadow: 0 4px 12px rgba(73,81,94,0.4); }
.btn--modal-confirm { background: linear-gradient(180deg, #e53935, #c62828); border-color: #e53935; padding: 10px 24px; }
.btn--modal-confirm:hover { box-shadow: 0 4px 16px rgba(229,57,53,0.4); }
